<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#4f46e5">
  <title>ูุญุงุณุจุฉ ุงูููุณ</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link rel="manifest" href="manifest.json">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">

  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
  <div class="liquid-background">
    <div class="blob-global blob-g-1"></div>
    <div class="blob-global blob-g-2"></div>
    <div class="blob-global blob-g-3"></div>
  </div>
  
  <header id="main-header">
    <div class="container header-content">
      <div class="logo">
        <a href="#">
          <img src="logo.png" alt="">
        </a>
      </div>

      <div id="header-progress-container" class="header-progress-container">
            <span id="header-progress-text">0%</span>
            <div class="header-progress-bar-bg">
                <div id="header-progress-fill" class="header-progress-fill"></div>
            </div>
      </div>

      <div class="header-actions">
          <button id="mobile-menu-btn" class="mobile-menu-toggle">
              <i class="fa-solid fa-ellipsis-vertical"></i>
          </button>

          <div id="action-icons" class="action-icons-wrapper">
              
              <button id="theme-toggle" aria-label="Toggle Dark Mode">
                  <i class="fa-solid fa-moon"></i>
              </button>

              <button id="analytics-btn" class="settings-btn" aria-label="ุงูุฅุญุตุงุฆูุงุช" onclick="scrollToAnalytics()">
                  <i class="fa-solid fa-chart-pie"></i>
              </button>

              <div class="notification-wrapper" style="position: relative;">
                  <button id="notification-btn" class="settings-btn" aria-label="Notifications">
                      <i class="fa-solid fa-bell"></i>
                      <span id="notif-badge" class="notification-badge hidden"></span>
                  </button>
                  <div id="notification-popup" class="notification-popup hidden">
                      <div class="popup-header">
                          <h4>ุชุฐููุฑ ุจุนุจุงุฏุฉ ุงูุบุฏ</h4>
                          <button id="close-notif" class="close-small">&times;</button>
                      </div>
                      <div class="popup-body" id="notif-content"></div>
                  </div>
              </div>

              <button id="settings-btn" class="settings-btn hidden" aria-label="Settings">
                  <i class="fa-solid fa-gear"></i>
              </button>

              <div class="auth-container">
                  <button id="login-btn" class="btn-primary">ุชุณุฌูู ุงูุฏุฎูู</button>
                  <div id="profile-icon" class="profile-icon hidden">
                      <img src="logo.png" alt="Profile">
                  </div>
              </div>

          </div>
      </div>
    </div>


  </header>

  <main>

    <section id="bonus-section" class="container hidden" style="margin-top: 1rem; margin-bottom: 1rem;">
        <div class="bonus-card" data-aos="fade-down">
            <div class="bonus-icon">
                <i class="fa-solid fa-star"></i>
            </div>
            <div class="bonus-content">
                <h3 id="bonus-title">ุนุจุงุฏุฉ ุฎุงุตุฉ ุงูููู</h3>
                <p id="bonus-desc">ูุตู ุงูุนุจุงุฏุฉ</p>
            </div>
            <button id="bonus-action-btn" class="task-btn bonus-btn" data-points="5">
                ุชูุช (5+ ููุงุท)
            </button>
        </div>
    </section>

    <section class="accountability-section">
      <div class="container">
        <h2 id="daily-verse" class="page-title"></h2>
        <div class="date-toggle-container">
  <button id="date-toggle-btn" class="date-toggle-btn">
    <span id="current-date-display"></span>
    <i class="fa-solid fa-chevron-down"></i>
  </button>
  
  <div id="date-dropdown" class="date-dropdown hidden dual-calendar">
    
    <div class="calendar-section gregorian-section">
      <div class="month-selector">
        <button id="prev-month-g" class="month-nav-btn"><i class="fa-solid fa-chevron-right"></i></button>
        <span id="current-month-display-g"></span>
        <button id="next-month-g" class="month-nav-btn"><i class="fa-solid fa-chevron-left"></i></button>
      </div>
      <div class="days-header">
        <span>ุณุจุช</span><span>ุฃุญุฏ</span><span>ุงุซููู</span><span>ุซูุงุซุงุก</span><span>ุฃุฑุจุนุงุก</span><span>ุฎููุณ</span><span>ุฌูุนุฉ</span>
      </div>
      <div id="days-grid-g" class="days-grid"></div>
    </div>

    <div class="calendar-divider"></div>

    <div class="calendar-section hijri-section">
      <div class="month-selector">
        <button id="prev-month-h" class="month-nav-btn"><i class="fa-solid fa-chevron-right"></i></button>
        <span id="current-month-display-h"></span>
        <button id="next-month-h" class="month-nav-btn"><i class="fa-solid fa-chevron-left"></i></button>
      </div>
      <div class="days-header">
        <span>ุณุจุช</span><span>ุฃุญุฏ</span><span>ุงุซููู</span><span>ุซูุงุซุงุก</span><span>ุฃุฑุจุนุงุก</span><span>ุฎููุณ</span><span>ุฌูุนุฉ</span>
      </div>
      <div id="days-grid-h" class="days-grid"></div>
    </div>

  </div>
</div>

        <div class="global-progress-container">
          <div class="progress-label">
            <span>ุฅูุฌุงุฒ ุงูููู</span>
            <span id="total-score">0%</span>
          </div>
          <div class="progress-track">
            <div id="global-progress-bar" class="progress-fill" style="width: 0%"></div>
          </div>
        </div>
        <!-- Settings -->
        <div id="setup-modal" class="modal-overlay hidden" style="z-index: 3000;">
          <div class="liquid-modal">
              <div class="modal-header">
                  <h3>ุฅุนุฏุงุฏ ุญุณุงุจู</h3>
              </div>
              <div class="modal-body">
                  <p style="margin-bottom: 1rem; color: var(--text-secondary); font-size: 0.9rem;">ููุฎุตุต ุงูุชุฌุฑุจุฉ ููุ ูุญุชุงุฌ ูุจุนุถ ุงูุจูุงูุงุช.</p>
                  
                  <div class="form-group">
                      <label>ุงูุงุณู </label>
                      <input type="text" id="setup-name" placeholder="ุงูุงุณู ุงูุฐู ุชูุฏ ุฃู ููุงุฏูู ุจู">
                  </div>

                  <div class="form-group">
                      <label>ุงูุฌูุณ (ูุชุฎุตูุต ุงูุฃุญูุงู ุงูููููุฉ)</label>
                      <select id="setup-gender" class="glass-input">
                          <option value="male">ุฐูุฑ</option>
                          <option value="female">ุฃูุซู</option>
                      </select>
                  </div>

                  <div class="form-group">
                      <label>ุงููุฑุฏ ุงููุฑุขูู ุงููููู ุงููุณุชูุฏู</label>
                      <input type="text" id="setup-quran-goal" placeholder="ูุซุงู: ุฌุฒุกุ ุฑุจุนููุ ุตูุญุฉ...">
                  </div>

                  <div class="form-group">
                      <label>ุงููููุน ุงูุฌุบุฑุงูู (ูููุงููุช ุงูุตูุงุฉ)</label>
                      <button id="get-location-btn" class="task-btn toggle-btn" style="width:100%; display:flex; gap:10px; justify-content:center; align-items:center;">
                          <i class="fa-solid fa-location-dot"></i> ุชุญุฏูุฏ ูููุนู ุชููุงุฆูุงู
                      </button>
                      <p id="location-status" style="font-size: 0.8rem; margin-top: 5px; color: var(--accent-color);"></p>
                  </div>

                  <div class="form-group">
                    <label>ูุณุชูุงู ุงูุญุงูู (ูุถุจุท ูููุฉ ุงูุฃุฐูุงุฑ)</label>
                    <select id="setup-level" class="glass-input">
                        <option value="3">ูุฌุชูุฏ (ุงููุฑุฏ ุงููุงูู - ูู ุงูุฃุฐูุงุฑ)</option>
                        <option value="2">ูุชูุณุท (ุฃูู ุงูุฃุฐูุงุฑ ูุงูุณูู)</option>
                        <option value="1">ูุจุชุฏุฆ (ุงูุชุญุตูู ุงูุฃุณุงุณู ููุท)</option>
                    </select>
                    <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px;">
                        ููููู ุชุบููุฑ ุงููุณุชูู ูุงุญูุงู ูุน ุชุทูุฑ ููุชู.
                    </p>
                </div>

                  <hr style="border-color: var(--glass-border); margin: 1.5rem 0;">
                  <h4 style="margin-bottom: 1rem; color: var(--accent-color);"><i class="fa-solid fa-bell"></i> ููุงุนูุฏ ุงูุชูุจููุงุช</h4>
                  
                  <div class="form-group" style="display: flex; justify-content: space-between; align-items: center;">
                      <label style="margin:0;">ุชูุนูู ุงูุฅุดุนุงุฑุงุช</label>
                      <button id="enable-notify-btn" class="btn-primary" style="padding: 5px 10px; font-size: 0.8rem;">ุชูุนูู ุงูุขู</button>
                  </div>

                  <div class="form-group">
                      <label>ููุช ุฃุฐูุงุฑ ุงูุตุจุงุญ</label>
                      <input type="time" id="setup-morning-time" class="glass-input">
                  </div>

                  <div class="form-group">
                      <label>ููุช ุฃุฐูุงุฑ ุงููุณุงุก</label>
                      <input type="time" id="setup-evening-time" class="glass-input">
                  </div>

                  <div class="form-group">
                      <label>ููุนุฏ ุงูุชุฐููุฑ ุจุงููุฑุฏ ุงููุฑุขูู</label>
                      <input type="time" id="setup-wird-time" class="glass-input">
                  </div>

              </div>
              <div class="modal-footer">
                  <button id="save-setup-btn" class="btn-primary" style="width: 100%;" disabled>ุญูุธ ูุจุฏุก ุงูุฑุญูุฉ</button>
              </div>
          </div>
      </div>

        <div class="prayers-container">

          <div class="prayer-item" id="fajr-card" data-aos="fade-up">
            <div class="prayer-header-wrapper">
              <span class="prayer-name">ุงููุฌุฑ</span>
              <span class="prayer-timer" id="timer-fajr">--:--:--</span>
            </div>
            <div class="prayer-content-grid">
              <div class="task-box">
                <h4 class="box-title">ุงูุตูุงุฉ</h4>
                <button class="task-btn prayer-btn" data-type="mosque" data-points="3">ุตูุงุฉ ูู ุงููุณุฌุฏ (3 ููุงุท)</button>
                <button class="task-btn prayer-btn" data-points="2">ุนูู ุงูููุช ูู ุงูุจูุช (2 ููุทุฉ)</button>
                <button class="task-btn prayer-btn" data-points="1">ุชุฃุฎุฑุช ูููู ุฏุงุฎู ููุชูุง (1 ููุทุฉ)</button>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุฃุฐูุงุฑ ุจุนุฏ ุงูุตูุงุฉ</h4>
                <button class="task-btn action-btn" onclick="openAdhkar('post_fajr')">ุนุฑุถ ุงูุฃุฐูุงุฑ (2 ููุทุฉ)</button>
                <div class="adhkar-progress-track">
                  <div class="adhkar-progress-fill" id="progress-post_fajr" style="width: 0%"></div>
                </div>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุฃุฐูุงุฑ ุงูุตุจุงุญ</h4>
                <button class="task-btn action-btn" onclick="openAdhkar('morning')">ุนุฑุถ ุงูุฃุฐูุงุฑ (2 ููุทุฉ)</button>
                <button class="task-btn toggle-btn" data-points="2">ุตูุงุฉ ุงูุถุญู - 4 ุฑูุนุงุช (2 ููุทุฉ)</button>
                <div class="adhkar-progress-track">
                  <div class="adhkar-progress-fill" id="progress-morning" style="width: 0%"></div>
                </div>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุณูู ุงูุตูุงุฉ</h4>
                <button class="task-btn toggle-btn" data-points="2">ุณูุฉ ุงููุฌุฑ ุงููุจููุฉ (2 ููุทุฉ)</button>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุฃุฐูุงุฑ ุงูุงุณุชููุงุธ</h4>
                <button class="task-btn action-btn" onclick="openAdhkar('wakeup')">ุนุฑุถ ุงูุฃุฐูุงุฑ (2 ููุทุฉ)</button>
                <div class="adhkar-progress-track">
                  <div class="adhkar-progress-fill" id="progress-wakeup" style="width: 0%"></div>
                </div>
              </div>
              <button class="add-prayer-extra-btn" data-prayer="fajr">
                <i class="fa-solid fa-plus"></i>
              </button>
            </div>
          </div>

          <div class="prayer-item" id="dhuhr-card" data-aos="fade-up">
            <div class="prayer-header-wrapper">
              <span class="prayer-name">ุงูุธูุฑ</span>
              <span class="prayer-timer" id="timer-dhuhr">--:--:--</span>
            </div>
            <div class="prayer-content-grid">
              <div class="task-box">
                <h4 class="box-title">ุงูุตูุงุฉ</h4>
                <button class="task-btn prayer-btn" data-type="mosque" data-points="3">ุตูุงุฉ ูู ุงููุณุฌุฏ (3 ููุงุท)</button>
                <button class="task-btn prayer-btn" data-points="2">ุนูู ุงูููุช ูู ุงูุจูุช (2 ููุทุฉ)</button>
                <button class="task-btn prayer-btn" data-points="1">ุชุฃุฎุฑุช ูููู ุฏุงุฎู ููุชูุง (1 ููุทุฉ)</button>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุฃุฐูุงุฑ ุจุนุฏ ุงูุตูุงุฉ</h4>
                <button class="task-btn action-btn" onclick="openAdhkar('post_dhuhr')">ุนุฑุถ ุงูุฃุฐูุงุฑ (2 ููุทุฉ)</button>
                <div class="adhkar-progress-track">
                  <div class="adhkar-progress-fill" id="progress-post_dhuhr" style="width: 0%"></div>
                </div>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุณูู ุงูุตูุงุฉ</h4>
                <button class="task-btn toggle-btn" data-points="2">ุณูุฉ ูุจููุฉ - 4 ุฑูุนุงุช (2 ููุทุฉ)</button>
                <button class="task-btn toggle-btn" data-points="2">ุณูุฉ ุจุนุฏูุฉ - ุฑูุนุชูู (2 ููุทุฉ)</button>
              </div>
              <button class="add-prayer-extra-btn" data-prayer="dhuhr">
                <i class="fa-solid fa-plus"></i>
              </button>
            </div>
          </div>

          <div class="prayer-item" id="asr-card" data-aos="fade-up">
            <div class="prayer-header-wrapper">
              <span class="prayer-name">ุงูุนุตุฑ</span>
              <span class="prayer-timer" id="timer-asr">--:--:--</span>
            </div>            
            <div class="prayer-content-grid">
              <div class="task-box">
                <h4 class="box-title">ุงูุตูุงุฉ</h4>
                <button class="task-btn prayer-btn" data-type="mosque" data-points="3">ุตูุงุฉ ูู ุงููุณุฌุฏ (3 ููุงุท)</button>
                <button class="task-btn prayer-btn" data-points="2">ุนูู ุงูููุช ูู ุงูุจูุช (2 ููุทุฉ)</button>
                <button class="task-btn prayer-btn" data-points="1">ุชุฃุฎุฑุช ูููู ุฏุงุฎู ููุชูุง (1 ููุทุฉ)</button>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุฃุฐูุงุฑ ุจุนุฏ ุงูุตูุงุฉ</h4>
                <button class="task-btn action-btn" onclick="openAdhkar('post_asr')">ุนุฑุถ ุงูุฃุฐูุงุฑ (2 ููุทุฉ)</button>
                <div class="adhkar-progress-track">
                  <div class="adhkar-progress-fill" id="progress-post_asr" style="width: 0%"></div>
                </div>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุฃุฐูุงุฑ ุงููุณุงุก</h4>
                <button class="task-btn action-btn" onclick="openAdhkar('evening')">ุนุฑุถ ุงูุฃุฐูุงุฑ (2 ููุทุฉ)</button>
                <div class="adhkar-progress-track">
                  <div class="adhkar-progress-fill" id="progress-evening" style="width: 0%"></div>
                </div>
              </div>
              <button class="add-prayer-extra-btn" data-prayer="asr">
                <i class="fa-solid fa-plus"></i>
              </button>
            </div>
          </div>

          <div class="prayer-item" id="maghrib-card" data-aos="fade-up">
            <div class="prayer-header-wrapper">
              <span class="prayer-name">ุงููุบุฑุจ</span>
              <span class="prayer-timer" id="timer-maghrib">--:--:--</span>
            </div>  
            <div class="prayer-content-grid">
              <div class="task-box">
                <h4 class="box-title">ุงูุตูุงุฉ</h4>
                <button class="task-btn prayer-btn" data-type="mosque" data-points="3">ุตูุงุฉ ูู ุงููุณุฌุฏ (3 ููุงุท)</button>
                <button class="task-btn prayer-btn" data-points="2">ุนูู ุงูููุช ูู ุงูุจูุช (2 ููุทุฉ)</button>
                <button class="task-btn prayer-btn" data-points="1">ุชุฃุฎุฑุช ูููู ุฏุงุฎู ููุชูุง (1 ููุทุฉ)</button>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุฃุฐูุงุฑ ุจุนุฏ ุงูุตูุงุฉ</h4>
                <button class="task-btn action-btn" onclick="openAdhkar('post_maghrib')">ุนุฑุถ ุงูุฃุฐูุงุฑ (2 ููุทุฉ)</button>
                <div class="adhkar-progress-track">
                  <div class="adhkar-progress-fill" id="progress-post_maghrib" style="width: 0%"></div>
                </div>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุณูู ุงูุตูุงุฉ</h4>
                <button class="task-btn toggle-btn" data-points="2">ุณูุฉ ุจุนุฏูุฉ (2 ููุทุฉ)</button>
              </div>
              <button class="add-prayer-extra-btn" data-prayer="maghrib">
                <i class="fa-solid fa-plus"></i>
              </button>
            </div>
          </div>

          <div class="prayer-item" id="isha-card" data-aos="fade-up">
            <div class="prayer-header-wrapper">
              <span class="prayer-name">ุงูุนุดุงุก</span>
              <span class="prayer-timer" id="timer-isha">--:--:--</span>
            </div>  
            <div class="prayer-content-grid">
              <div class="task-box">
                <h4 class="box-title">ุงูุตูุงุฉ</h4>
                <button class="task-btn prayer-btn" data-type="mosque" data-points="3">ุตูุงุฉ ูู ุงููุณุฌุฏ (3 ููุงุท)</button>
                <button class="task-btn prayer-btn" data-points="2">ุนูู ุงูููุช ูู ุงูุจูุช (2 ููุทุฉ)</button>
                <button class="task-btn prayer-btn" data-points="1">ุชุฃุฎุฑุช ูููู ุฏุงุฎู ููุชูุง (1 ููุทุฉ)</button>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุฃุฐูุงุฑ ุจุนุฏ ุงูุตูุงุฉ</h4>
                <button class="task-btn action-btn" onclick="openAdhkar('post_isha')">ุนุฑุถ ุงูุฃุฐูุงุฑ (2 ููุทุฉ)</button>
                <div class="adhkar-progress-track">
                  <div class="adhkar-progress-fill" id="progress-post_isha" style="width: 0%"></div>
                </div>
              </div>
              <div class="task-box">
                <h4 class="box-title">ุณูู ุงูุตูุงุฉ</h4>
                <button class="task-btn toggle-btn" data-points="2">ุณูุฉ ุจุนุฏูุฉ (2 ููุทุฉ)</button>
              </div>
              <button class="add-prayer-extra-btn" data-prayer="isha">
                <i class="fa-solid fa-plus"></i>
              </button>
            </div>
          </div>

        </div>

      </div>
    </section>

    <section class="ibadat-section" data-aos="fade-up">
      <div class="container">
        <div class="prayer-item">
          <span class="prayer-name">ุฑูู ุงูุนุจุงุฏุงุช</span>
          <div class="prayer-content-grid">
            <div class="task-box full-width-box">
              <h4 class="box-title">ููุงูู ูููุงู</h4>
              <div class="ibadat-grid" id="ibadat-grid">
                <div class="ibada-box" data-id="qiyam" data-points="4">
                  <h3 class="ibada-title">ููุงู ุงูููู (4 ููุงุท)</h3>
                  <div class="ibada-status"></div>
                </div>
                <div class="ibada-box" data-id="witr" data-points="2">
                  <h3 class="ibada-title">ุฑูุนุฉ ุงููุชุฑ (2 ููุทุฉ)</h3>
                  <div class="ibada-status"></div>
                </div>
                <div class="ibada-box" data-id="quran" data-points="4">
                  <h3 class="ibada-title">ูุฑุฏ ุงููุฑุขู - ุฑุจุนูู (4 ููุงุท)</h3>
                  <div class="ibada-status"></div>
                </div>
                <button id="add-worship-btn" class="add-worship-btn">
                  <i class="fa-solid fa-plus"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div id="add-worship-modal" class="modal-overlay hidden">
    <div class="liquid-modal">
      <div class="modal-header">
        <h3>ุฅุถุงูุฉ ุนุจุงุฏุฉ ุฌุฏูุฏุฉ</h3>
        <button id="close-worship-modal" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="worship-name">ุงุณู ุงูุนุจุงุฏุฉ</label>
          <input type="text" id="worship-name" placeholder="ูุซุงู: ุงูุตูุงู ">
        </div>
        <div class="form-group">
          <label for="worship-time">ููุช ุงูุชูููุฐ</label>
          <input type="text" id="worship-time" placeholder="ูุซุงู: ุงูุฅุซููู ูุงูุฎููุณ ">
        </div>
        <div class="form-group">
          <label for="worship-points">ุนุฏุฏ ุงูููุงุท</label>
          <select id="worship-points" class="glass-input">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button id="save-worship-btn" class="btn-primary">ุญูุธ</button>
      </div>
    </div>
  </div>

  <div id="adhkar-modal" class="adhkar-modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modal-title">ุงูุฃุฐูุงุฑ</h3>
        <button id="close-modal" class="close-btn">&times;</button>
      </div>
      <div id="adhkar-list" class="adhkar-list no-scrollbar"></div>
      <div class="modal-footer">
        <button id="complete-adhkar-btn" class="btn-primary">ุฅุชูุงู</button>
      </div>
    </div>
  </div>

  <div id="extra-prayer-modal" class="modal-overlay hidden">
    <div class="liquid-modal">
      <div class="modal-header">
        <h3>ุฅุถุงูุฉ ูุงููุฉ</h3>
        <button id="close-extra-modal" class="close-btn">&times;</button>
      </div>
      <div id="extra-worship-list" class="adhkar-list no-scrollbar"></div>
    </div>
  </div>

  <section class="warning-section" data-aos="fade-up">
    <div class="container">
      <div class="prayer-item warning-container">
        <span class="prayer-name" style="color: #ef4444; border-color: #ef4444;">ุงุญุฐุฑ ุงูููููุงุช "ููู ููููุฉ ูุตุฉ ููู ูู ูุตุฉ ุนุธุฉุ ูุงุชุนุธ!"</span>
        
        <div class="warning-grid">
          <div class="warning-box" onclick="openWarning('lying')">
              <i class="fa-solid fa-comment-slash warning-icon"></i>
              <h3 class="warning-title">ุงููุฐุจ</h3>
          </div>

          <div class="warning-box" onclick="openWarning('backbiting')">
              <i class="fa-solid fa-users-slash warning-icon"></i>
              <h3 class="warning-title">ุงูุบูุจุฉ</h3>
          </div>

          <div class="warning-box" onclick="openWarning('gazing')">
              <i class="fa-solid fa-eye-slash warning-icon"></i>
              <h3 class="warning-title">ุฅุทูุงู ุงูุจุตุฑ</h3>
          </div>

          <div class="warning-box" onclick="openWarning('cursing')">
              <i class="fa-solid fa-face-angry warning-icon"></i>
              <h3 class="warning-title">ุงูุณุจ ูุงููุนู</h3>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div id="warning-modal" class="modal-overlay hidden">
    <div class="liquid-modal warning-modal-content">
        <div class="modal-header">
            <h3 id="warning-modal-title" style="color: #ef4444;">ุนููุงู ุงูุชุญุฐูุฑ</h3>
            <button id="close-warning-modal" class="close-btn">&times;</button>
        </div>
        
        <div class="modal-body warning-body">
            
            <div class="definition-box">
                <h4 class="mini-title"><i class="fa-solid fa-circle-info"></i> ุงูููููู:</h4>
                <p id="warning-def">ููุง ูุธูุฑ ุงูุชุนุฑูู...</p>
            </div>

            <div class="daily-example-box">
                <h4 class="mini-title"><i class="fa-solid fa-calendar-day"></i> ูุซุงู ูู ูุงูุนูุง (ูููู):</h4>
                <p id="warning-daily-example">ููุง ูุธูุฑ ุงููุซุงู ุงููููู...</p>
            </div>

            <div class="quran-quote">
                <i class="fa-solid fa-book"></i>
                <p id="warning-quran"></p>
            </div>
            <div class="hadith-quote">
                <i class="fa-solid fa-scroll"></i>
                <p id="warning-hadith"></p>
            </div>

            <div class="story-section">
                <button id="btn-show-story" class="btn-primary story-btn">
                    <i class="fa-solid fa-book-open"></i> ุงูุฑุฃ ูุตุฉ ูู ุงูุณูุฑุฉ
                </button>
                <div id="warning-story-content" class="story-content hidden">
                    <p id="story-text"></p>
                </div>
            </div>

        </div>
    </div>
</div>

  <section class="reflection-section" data-aos="fade-up">
    <div class="container">
      <div class="prayer-item">
        <div class="reflection-header">
            <h3 id="reflection-title" class="box-title" style="font-size: 1.4rem; margin-bottom: 0.5rem;">ูุง ุณุจุจ ูุฐุง ุงูุชูุตูุฑ ุงููููุ</h3>
            <p class="reflection-hint">
                ุงููุฏู ููุณ ุงูุฌูุฏุ ุจู ุงูููู. ุฏูู ููุง ูุง ุฃุนุงูู ูุชูุฑุฑูุ ุฃู ูุง ุดุบูู ูุชุชุฌูุจู.
            </p>
        </div>
        
        <textarea id="reflection-input" class="glass-textarea" placeholder="ุงูุชุจ ุฎูุงุทุฑู ุนู ูููู ููุง... (ูุซูุงู: ููุช ูุชุฃุฎุฑุงู ููุงุชูู ุงููุฌุฑุ ุฃู ุตุญุจุฉ ุตุงูุญุฉ ุดุฌุนุชูู...)"></textarea>
        
        <button id="download-report-btn" class="btn-primary" style="width: 100%; margin-top: 1.5rem;">
            <i class="fa-solid fa-file-word"></i> ุญูุธ ูุชูุฒูู ุงูุชูุฑูุฑ
        </button>
      </div>
    </div>
  </section>
  <section id="analytics-section" class="accountability-section" data-aos="fade-up">
    <div class="container">
      <div class="prayer-item" style="border-color: var(--accent-color);">
        
        <div class="prayer-header-wrapper" style="border-bottom: none; margin-bottom: 1rem; flex-direction: column; gap: 15px;">
          <span class="prayer-name" style="color: var(--accent-color); border:none;">ุญุตุงุฏู ุงูุฅููุงูู</span>
          
          <div class="tabs-container">
            <button class="tab-btn active" onclick="switchTab('main')">ุงูุฑุฆูุณูุฉ</button>
            <button class="tab-btn" onclick="switchTab('daily')">ุงูุชูุงุตูู ุงูููููุฉ</button>
            <button class="tab-btn" onclick="switchTab('weekly')">ุฃุฑุดูู ุงูุฃุณุงุจูุน</button>
            <button class="tab-btn" onclick="switchTab('monthly')">ุฃุฑุดูู ุงูุดููุฑ</button>
          </div>
        </div>

        <div id="tab-main" class="tab-content active">
          <div class="toggle-container" style="background: rgba(0,0,0,0.1); padding: 5px; border-radius: 20px; width: fit-content; margin: 0 auto 20px;">
            <button class="filter-btn active" onclick="updateCharts('week')">ุฃุณุจูุนู</button>
            <button class="filter-btn" onclick="updateCharts('month')">ุดูุฑู</button>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon"><i class="fa-solid fa-trophy"></i></div>
              <div class="stat-info">
                <h4>ูุณุจุฉ ุงูุฅูุฌุงุฒ</h4>
                <span id="period-score">0%</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon"><i class="fa-solid fa-fire"></i></div>
              <div class="stat-info">
                <h4>ุฃูุถู ููู</h4>
                <span id="best-day">--</span>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon"><i class="fa-solid fa-check-double"></i></div>
              <div class="stat-info">
                <h4>ุฃูุงู ุงูุงูุชุฒุงู ุงูุชุงู</h4>
                <span id="perfect-days">0</span>
              </div>
            </div>
          </div>

          <div class="charts-container">
            <div class="chart-box">
              <h4><i class="fa-solid fa-arrow-trend-up"></i> ุชุทูุฑ ุฃุฏุงุฆู</h4>
              <canvas id="progressChart"></canvas>
            </div>
            <div class="chart-box">
              <h4><i class="fa-solid fa-scale-balanced"></i> ุชูุฒูุน ุงูุนุจุงุฏุงุช</h4>
              <canvas id="distributionChart"></canvas>
            </div>
          </div>

          <div class="analysis-grid">
            <div class="analysis-box strength">
              <h4><i class="fa-solid fa-thumbs-up"></i> ุฃูุซุฑ ูุง ุญุงูุธุช ุนููู</h4>
              <ul id="top-habits-list"><li>ุฌุงุฑู ุงูุชุญููู...</li></ul>
            </div>
            <div class="analysis-box weakness">
              <h4><i class="fa-solid fa-triangle-exclamation"></i> ูุญุชุงุฌ ูุชุฑููุฒ ุฃูุจุฑ</h4>
              <ul id="low-habits-list"><li>ุฌุงุฑู ุงูุชุญููู...</li></ul>
            </div>
          </div>
          
           <div style="display: flex; gap: 10px; margin-top: 2rem;">
              <button onclick="downloadReport('week')" class="btn-primary" style="flex: 1; background: #4f46e5;">
                  <i class="fa-solid fa-file-pdf"></i>  ุชุญููู ุงูุชูุฑูุฑ ุฃุณุจูุนู 
              </button>
              <button onclick="downloadReport('month')" class="btn-primary" style="flex: 1; background: #0891b2;">
                  <i class="fa-solid fa-file-contract"></i> ุชุญููู ุงูุชูุฑูุฑ ุดูุฑู
              </button>
          </div>
        </div>

        <div id="tab-daily" class="tab-content">
          <div class="chart-box" style="height: auto; min-height: auto;">
            <h4><i class="fa-solid fa-table-list"></i> ุณุฌู ุงูุฃูุงู (ูุฑุชุจ ูู ุงูุฃุญุฏุซ)</h4>
            <div class="table-responsive">
              <table class="analytics-table">
                <thead>
                  <tr>
                    <th>ุงูุชุงุฑูุฎ</th>
                    <th>ุงูููู</th>
                    <th>ุงูุฅูุฌุงุฒ ุงูุนุงู</th>
                    <th>ุงูุตููุงุช</th>
                    <th>ุงููุฑุขู</th>
                    <th>ุงูุฃุฐูุงุฑ</th>
                    <th>ุงูุณูู</th>
                    <th>ุงูููุงู</th>
                  </tr>
                </thead>
                <tbody id="analytics-table-body">
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div id="tab-weekly" class="tab-content">
          <div class="chart-box auto-height">
            <h4><i class="fa-solid fa-calendar-week"></i> ุฃุฑุดูู ุงูุฃุณุงุจูุน (ูู ุงูุฌูุนุฉ ููุฎููุณ)</h4>
            <div class="table-responsive">
              <table class="analytics-table">
                <thead>
                  <tr>
                    <th>ุงูุฃุณุจูุน</th>
                    <th>ุงููุชุฑุฉ</th>
                    <th>ูุชูุณุท ุงูุฅูุฌุงุฒ</th>
                    <th>ุงูุชูููู</th>
                  </tr>
                </thead>
                <tbody id="weekly-archive-body">
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div id="tab-monthly" class="tab-content">
          <div class="chart-box auto-height">
            <h4><i class="fa-solid fa-calendar-days"></i> ุฃุฑุดูู ุงูุดููุฑ</h4>
            <div class="table-responsive">
              <table class="analytics-table">
                <thead>
                  <tr>
                    <th>ุงูุดูุฑ</th>
                    <th>ูุชูุณุท ุงูุฅูุฌุงุฒ</th>
                    <th>ุงูุชูููู</th>
                  </tr>
                </thead>
                <tbody id="monthly-archive-body">
                </tbody>
              </table>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <div class="footer-wrapper">
    <footer class="container glass-footer">
      <div class="footer-brand">
        <h3><img src="logo.png" alt="Logo"></h3>
        <p>
          ุตูุนุช ููุฌู ุงููู ุชุนุงูู ุจูุงุณุทุฉ
          <a href="https://www.linkedin.com/in/mohamdahmedhamdi/" target="_blank" rel="noopener noreferrer">ูุญูุฏ ุญูุฏู</a>
          ู
          <a href="https://linkedin.com/in/sidali-djeghbal" target="_blank" rel="noopener noreferrer">ุณูุฏุนูู</a>ุ
          ูุณุฃููู ุงูุฏุนุงุก
        </p>
      </div>
    </footer>
  </div>

  <div id="report-template-container" style="position: absolute; left: -9999px; top: 0; width: 800px;">
  <div id="pdf-content" class="pdf-page">
    
    <div class="pdf-header">
      <div class="header-logo">
        <img src="logo.png" alt="Logo" style="height: 60px;"> </div>
      <div class="header-info">
        <h1 class="pdf-title">ุชูุฑูุฑ ุญุตุงุฏ ุงูุฃุนูุงู</h1>
        <p class="pdf-subtitle" id="pdf-period-text">ุชูุฑูุฑ ุฃุณุจูุนู | ูู ... ุฅูู ...</p>
      </div>
      <div class="header-score">
        <span>ุงูุฅูุฌุงุฒ ุงูุนุงู</span>
        <div class="score-circle" id="pdf-total-score">0%</div>
      </div>
    </div>

    <div class="pdf-summary-grid">
      <div class="summary-card">
        <span class="label">ุฃูุงู ุงูุงูุชุฒุงู</span>
        <span class="value" id="pdf-perfect-days">0</span>
      </div>
      <div class="summary-card">
        <span class="label">ุฃูุถู ููู</span>
        <span class="value" id="pdf-best-day">-</span>
      </div>
      <div class="summary-card">
        <span class="label">ูุนุฏู ุงูุตููุงุช</span>
        <span class="value" id="pdf-prayer-avg">0%</span>
      </div>
      <div class="summary-card">
        <span class="label">ูุนุฏู ุงููุฑุขู</span>
        <span class="value" id="pdf-quran-avg">0%</span>
      </div>
    </div>

    <div class="pdf-charts-section">
      <h3><i class="fa-solid fa-chart-pie"></i> ูุธุฑุฉ ุนุงูุฉ ุจูุงููุฉ</h3>
      <div class="charts-wrapper">
        <img id="pdf-chart-line" class="pdf-chart-img" />
        <img id="pdf-chart-radar" class="pdf-chart-img" />
      </div>
    </div>

    <div class="pdf-details-section">
      <h3><i class="fa-solid fa-list-check"></i> ุชูุงุตูู ุงูุฃูุงู</h3>
      <table class="pdf-table">
        <thead>
          <tr>
            <th width="15%">ุงูุชุงุฑูุฎ</th>
            <th width="10%">ุงูููู</th>
            <th width="10%">ุงููุณุจุฉ</th>
            <th width="40%">ุฃุจุฑุฒ ุงูุฅูุฌุงุฒุงุช</th>
            <th width="25%">ููุงุญุธุงุช / ุชูุตูุฑ</th>
          </tr>
        </thead>
        <tbody id="pdf-daily-rows">
          </tbody>
      </table>
    </div>

    <div class="pdf-footer">
      <p>ุชู ุงุณุชุฎุฑุงุฌ ูุฐุง ุงูุชูุฑูุฑ ูู ููุตุฉ "ูุญุงุณุจุฉ ุงูููุณ" - ุงูููู ุงุฌุนู ุฃุนูุงููุง ุฎุงูุตุฉ ููุฌูู ุงููุฑูู.</p>
      <p id="pdf-generated-date"></p>
    </div>

  </div>
</div>

<div id="smart-report-modal" class="modal-overlay hidden" style="z-index: 9999;">
  <div class="liquid-modal" style="max-width: 400px; text-align: center;">
    <div class="modal-header" style="justify-content: center; flex-direction: column;">
      <div id="smart-icon" style="font-size: 3rem; margin-bottom: 10px;">๐</div>
      <h3 id="smart-title" style="margin: 0;">ุชูุฑูุฑู ุงููููู</h3>
    </div>
    
    <div class="modal-body">
      <p id="smart-message" style="font-size: 1.1rem; line-height: 1.6; color: var(--text-primary); margin-bottom: 15px;">
        ุฌุงุฑู ุชุญููู ุฃุฏุงุฆู...
      </p>
      
      <div id="smart-details" style="background: rgba(0,0,0,0.05); padding: 10px; border-radius: 10px; font-size: 0.9rem; text-align: right;">
        </div>
    </div>

    <div class="modal-footer">
      <button onclick="document.getElementById('smart-report-modal').classList.add('hidden')" class="btn-primary" style="width: 100%;">
        ุงุณุชุนู ุจุงููู ูุฃููู
      </button>
    </div>
  </div>
</div>



  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js" defer></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js" defer></script>
  <script src="script.js" defer></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/driver.js@1.0.1/dist/driver.css"/>
<script src="https://cdn.jsdelivr.net/npm/driver.js@1.0.1/dist/driver.js.iife.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js').catch(() => {
          // Ignore SW errors to avoid blocking app startup.
        });
      });
    }
  </script>
</body>


</html>
